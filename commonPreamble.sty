% See example at 
% https://www.overleaf.com/learn/latex/Management_in_a_large_project
% Section "Preamble in a separate file"
\ProvidesPackage{commonPreamble}

% Common packages
% Recommanded by Overleaf docs : 
% https://www.overleaf.com/learn/latex/Management_in_a_large_project
\usepackage{import}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{hyperref}
\usepackage[toc]{glossaries}
\usepackage{amssymb}
% Styles for table
% J'ai choisi la "long3col-booktabs" mais il y en a d'autres :
% https://www.dickimaw-books.com/gallery/glossaries-styles/
\usepackage{glossary-longbooktabs}
\makeglossaries
% Pour la bibliographie, on va utiliser biblatex
\usepackage{csquotes}
\usepackage{biblatex}
\addbibresource{memory.bib}
% Pour fixer le in
\DefineBibliographyStrings{french}{in={dans},inseries={dans}}
% Pour mettre des épigraphe
\usepackage{epigraph}
% Pour les images
\usepackage{graphicx}
% Pour utiliser l'option [H] dans begin{figure}
\usepackage{float}
% Pour rajouter ces fameuses sous sections
\usepackage[compact]{titlesec}
% Pour styler les chapitres
% Je préfère la Glenn car elle est assez agréable pour tout (y compris la bibliographie)
\usepackage[Glenn]{fncychap}
% Pour éviter que les chapitres prennent trop de place
% https://tex.stackexchange.com/a/174539/129702
\usepackage{etoolbox} % provides macros for patching macros
\makeatletter
    \patchcmd{\@makechapterhead}{50\p@}{0\p@}{}{}
    \patchcmd{\@makeschapterhead}{50\p@}{0\p@}{}{}
\makeatother
% Pour réduire l'espace après les chapitres
% https://tex.stackexchange.com/a/111645/129702
% TODO on peut adapter selon les besoins
\makeatletter
    \patchcmd{\DOTI}{\vskip 80\p@}{\vskip 40\p@}{}{}
    \patchcmd{\DOTIS}{\vskip 40\p@}{\vskip 0\p@}{}{}
\makeatother

% Créer un semblant d'itemize
\newcommand{\tabitem}{~~\llap{\textbullet}~~}

% Pour afficher les numéros

% Set up margin here
% No problem with cover and back of the memory : the UCLouvain sty does its own
% geometry things with \newgeometry
\newgeometry{
    a4paper,
    % A voir ce qu'on choisit : j'ai pris au pif
    left=2cm,
    top=0.5cm,
}

% Custom common user defined commands

% Include \frontmatter , \mainmatter , \backmatter
% http://www-igm.univ-mlv.fr/~dr/XPOSE2004/latex/mise_en_page.html
\makeatletter

\newcommand\frontmatter{%
    \cleardoublepage
  %\@mainmatterfalse
  \pagenumbering{roman}}

\newcommand\mainmatter{%
    \cleardoublepage
 % \@mainmattertrue
  \pagenumbering{arabic}}

\newcommand\backmatter{%
  \if@openright
    \cleardoublepage
  \else
    \clearpage
  \fi
 % \@mainmatterfalse
   }

\makeatother

% Hide Overfull hbox warnings
%\hfuzz=10000pt 

% créer une subsubsubsection (voir même une subsubsubsubsection si tu en abuses )
% Ici solution copiée de 
% https://github.com/davidstutz/latex-resources/blob/master/general-subsubsubsection/subsubsubsection-subsubsubsubsection.tex

\titleclass{\subsubsubsection}{straight}[\subsection]

\newcounter{subsubsubsection}[subsubsection]

\renewcommand\thesubsubsubsection{\thesubsubsection.\arabic{subsubsubsection}}
\renewcommand\theparagraph{\thesubsubsubsection.\arabic{paragraph}}
\renewcommand\thesubparagraph{\theparagraph.\arabic{subparagraph}}

\titleformat{\subsubsubsection}{\normalfont\normalsize\bfseries}{\thesubsubsubsection}{1em}{}
\titlespacing*{\subsubsubsection}{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}

\makeatletter
\renewcommand\paragraph{%
  \@startsection{paragraph}{5}{\z@}{3.25ex \@plus1ex \@minus.2ex}{-1em}{\normalfont\normalsize\bfseries}
}
\renewcommand\subparagraph{%
  \@startsection{subparagraph}{6}{\parindent}{3.25ex \@plus1ex \@minus .2ex}{-1em}{\normalfont\normalsize\bfseries}
}
    \def\toclevel@subsubsubsection{4}
    \def\toclevel@paragraph{5}
    \def\toclevel@paragraph{6}
    \def\l@subsubsubsection{\@dottedtocline{4}{7em}{4em}}
    \def\l@paragraph{\@dottedtocline{5}{10em}{5em}}
    \def\l@subparagraph{\@dottedtocline{6}{14em}{6em}}
    \@addtoreset{subsubsubsection}{section}
    \@addtoreset{subsubsubsection}{subsection}
    \@addtoreset{paragraph}{subsubsubsection}
\makeatother

% Pour mettre un listings Javascript (+ ES6 qu'Alexandre va avoir besoin)
% https://github.com/ghammock/LaTeX_Listings_JavaScript_ES6

\lstdefinelanguage{JavaScript}{
  morekeywords=[1]{break, continue, delete, else, for, function, if, in,
    new, return, this, typeof, var, void, while, with},
  % Literals, primitive types, and reference types.
  morekeywords=[2]{false, null, true, boolean, number, undefined,
    Array, Boolean, Date, Math, Number, String, Object},
  % Built-ins.
  morekeywords=[3]{eval, parseInt, parseFloat, escape, unescape},
  sensitive,
  morecomment=[s]{/*}{*/},
  morecomment=[l]//,
  morecomment=[s]{/**}{*/}, % JavaDoc style comments
  morestring=[b]',
  morestring=[b]"
}[keywords, comments, strings]

\lstalias[]{ES6}[ECMAScript2015]{JavaScript}
\lstdefinelanguage[ECMAScript2015]{JavaScript}[]{JavaScript}{
  morekeywords=[1]{await, async, case, catch, class, const, default, do,
    enum, export, extends, finally, from, implements, import, instanceof,
    let, static, super, switch, throw, try},
  morestring=[b]` % Interpolation strings.
}

% Pour les créer
% \begin{lstlisting}[style=ES6, caption={ES6 (ECMAScript-2015) Listing}]
% \begin{lstlisting}[style=JavaScript, caption={JavaScript Listing}]

% Pour mettre des notes dans des tables
\usepackage[para,flushleft]{threeparttable}
% para,online,flushleft

% Pour les couleurs
\usepackage[dvipsnames]{xcolor}

% Pour les annexes
\usepackage[toc,page]{appendix}

% un peu de renommage
\renewcommand{\appendixname}{Annexe}
\renewcommand{\appendixpagename}{Annexes}
\renewcommand{\appendixtocname}{Annexes}
\renewcommand{\setthesection}{\Alph{section}}

% Pour ignorer des figures / tables des tables
% C'est uniquement pour les annexes, pour ne pas polluer le tout
% \captionsetup{list=no} pour cacher
% https://latex.org/forum/viewtopic.php?t=8034
% https://texblog.org/2010/05/02/excluding-items-from-list-of-figures-list-of-tables/
\usepackage{caption}

% Puisque qu'on risque d'avoir besoin de numéroter avec un niveau de profondeur différent pour chaque chapitre, voici une commande custom pour setter
% Origine de l'idée 
% https://tex.stackexchange.com/questions/290973/hide-sections-of-specific-chapter-from-table-of-contents

% L'argument, c'est le niveau de profondeur pour ce chapitre
\newcommand{\setcustomtocdepth}[1]{
    \addtocontents{toc}{\protect\setcounter{tocdepth}{#1}}
    %\setcounter{tocdepth}{#1}%
}

% Pour être sur que ces footnotes soient bien en bottom de page
\usepackage[bottom]{footmisc}